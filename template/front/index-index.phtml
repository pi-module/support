<?php $this->css($this->assetModule('css/front.css')); ?>
<div class="clearfix">
    <div class="row user-section-wrapper">
        <div class="col-md-3">
            <?php $sideActive = 'support'; ?>
            <?php include $this->templateModule('front/user-profile-sidebar.phtml', 'user'); ?>
        </div>
        <div class="col-md-9">
            <?php include $this->template('flash-messenger'); ?>

            <div class="clearfix">
                <div class="page-header">
                    <div class="clearfix row">
                        <div class="col-md-9">
                            <h1><?php _e('Tickets') ?></h1>
                        </div>
                        <div class="col-md-3 text-right">
                            <a title="<?php _e('New ticket') ?>" class="btn btn-success" href="<?php echo $this->escape($submit); ?>">
                                <i class="fas fa-plus"></i> <?php _e('New ticket') ?>
                            </a>
                        </div>
                    </div>
                </div>

                <?php if (!empty($tickets)) { ?>
                    <table class="table table-striped table-bordered table-sm">
                        <tr>
                            <th class="text-center"><?php _e('Ticket ID'); ?></th>
                            <th><?php _e('Title'); ?></th>
                            <th class="text-center"><?php _e('Status'); ?></th>
                            <th class="text-center"><?php _e('Time update'); ?></th>
                            <th class="text-center"><?php _e('Suggested time'); ?></th>
                            <th class="text-center"><?php _e('Execution time'); ?></th>
                        </tr>
                        <?php foreach ($tickets as $ticket) { ?>
                            <tr>
                                <td class="text-center"><?php echo $this->escape($ticket['id']); ?></td>
                                <td class="text-center">
                                    <a href="<?php echo $this->escape($ticket['ticketUrl']); ?>">
                                        <?php echo $this->escape($ticket['subject']); ?>
                                    </a>
                                </td>
                                <td class="text-center">
                                    <div class="badge <?php echo $this->escape($ticket['status_class']); ?>">
                                        <?php echo $this->escape($ticket['status_view']); ?>
                                    </div>
                                </td>
                                <td class="text-center"><?php echo $this->escape($ticket['time_update_view']); ?></td>
                                <td class="text-center"><?php echo $this->escape($ticket['time_suggested_view']); ?></td>
                                <td class="text-center"><?php echo $this->escape($ticket['time_execution_view']); ?></td>
                            </tr>
                        <?php } ?>
                    </table>
                <?php } else { ?>
                    <div class="alert alert-danger" role="alert">
                        <?php _e('You do not have any support tickets') ?>
                    </div>
                <?php } ?>
            </div>
            <div class="paginator">
                <?php echo $this->paginationControl($paginator, 'Sliding', 'paginator.phtml'); ?>
            </div>
        </div>
    </div>
</div>
